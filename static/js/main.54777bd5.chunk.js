(this["webpackJsonpsolutionlab-assignment"]=this["webpackJsonpsolutionlab-assignment"]||[]).push([[0],{77:function(e,t,a){e.exports=a(94)},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(8),r=a.n(o),l=(a(82),a(83),a(12)),i=(a(84),a(85),a(137)),f=a(138),u=a(139),s=a(136),d=a(44),E=a(60),m=a.n(E),p=a(133),C=a(144),b=a(132),g=a(130),h=a(131),O=a(129),v=function(e){return c.a.createElement("div",null,c.a.createElement(C.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.a.createElement(O.a,{id:"alert-dialog-title"},"Delete coffee"),c.a.createElement(g.a,null,c.a.createElement(h.a,{id:"alert-dialog-description"},"Are you sure want to delete ",e.coffeeTitle," from your billboard?")),c.a.createElement(b.a,null,c.a.createElement(p.a,{onClick:e.handleClose,color:"primary"},"Cancel"),c.a.createElement(p.a,{onClick:function(t){return e.deleteCard(e.coffeeId)},color:"primary",autoFocus:!0},"Delete"))))},S=a(61),y=a.n(S),F=a(142),_=a(135),j=function(e){return e[0].length>0&&e[1].length>0&&e[2]>0},I=function(e){var t=c.a.useState(e.coffeeImg),a=Object(l.a)(t,2),n=a[0],o=a[1],r=c.a.useState(e.coffeeTitle),i=Object(l.a)(r,2),f=i[0],u=i[1],s=c.a.useState(e.coffeePrice),d=Object(l.a)(s,2),E=d[0],m=d[1],h=c.a.useState(!1),v=Object(l.a)(h,2),S=v[0],y=v[1],I={url:n,title:f,price:E};return c.a.useEffect((function(){j([n,f,E])?y(!0):y(!1)}),[n,f,E]),c.a.createElement(C.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},c.a.createElement(O.a,{id:"form-dialog-title"},"Edit coffee"),c.a.createElement(g.a,null,c.a.createElement(F.a,{autoFocus:!0,margin:"dense",label:"Image Url",type:"text",fullWidth:!0,value:n,onChange:function(e){return o(e.target.value)}}),c.a.createElement(F.a,{margin:"dense",label:"Title",type:"text",fullWidth:!0,value:f,onChange:function(e){return u(e.target.value)}}),c.a.createElement(F.a,{margin:"dense",label:"Price",type:"number",InputProps:{endAdornment:c.a.createElement(_.a,{position:"end"},"\u20ac")},inputProps:{step:.1},fullWidth:!0,value:E,onChange:function(e){return m(Number(e.target.value))}})),c.a.createElement(b.a,null,c.a.createElement(p.a,{onClick:e.handleClose,color:"primary",variant:"contained"},"Cancel"),c.a.createElement(p.a,{onClick:function(t){return e.editCard(I,e.coffeeId)},color:"primary",variant:"contained",disabled:!S},"Edit")))},T=a(15),L="http://localhost:3001";function N(e,t){return function(a){return a({type:"REQUEST_COFFEE_BY_ID"}),fetch("".concat(L,"/coffee/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){a(t(e))}))}}function D(e){return{type:"ADD_COFFEE_SUCCESS",coffee:e}}function k(e){return function(t){return t(function(e){return{type:"ADD_COFFEE",coffee:e}}()),fetch("".concat(L,"/coffee"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e.url,title:e.title,price:e.price})}).then((function(e){return e.json()})).then((function(e){t(N(e,D))}))}}function w(e){return{type:"EDIT COFFEE SUCCESS",coffee:e}}var U=a(145),P=function(e){var t,a=c.a.useState(!1),n=Object(l.a)(a,2),o=n[0],r=n[1],E=c.a.useState(!1),p=Object(l.a)(E,2),C=p[0],b=p[1],g=Object(T.c)(),h=function(){r(!1)},O=function(){b(!1)},S=c.a.createElement(s.a,{className:"coffee-img",image:e.url,title:e.title,style:{background:"linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.3)) url('".concat(e.url,"')"),backgroundSize:"cover",backgroundPosition:"center"}});return c.a.createElement(i.a,{className:"coffee-card"},S,c.a.createElement(f.a,null,c.a.createElement(U.a,{title:"Delete","aria-label":"delete"},c.a.createElement(m.a,{className:"icon delete",onClick:function(){b(!0)}})),c.a.createElement(U.a,{title:"Edit","aria-label":"edit"},c.a.createElement(y.a,{className:"icon edit",onClick:function(){r(!0)}}))),c.a.createElement(u.a,{className:"container"},c.a.createElement(v,{isOpen:C,handleClose:O,coffeeTitle:e.title,coffeeId:e.id,deleteCard:function(e){var t;g((t=e,function(e){return e(function(e){return{type:"REMOVE_COFFEE",coffeeId:e}}()),fetch("".concat(L,"/coffee/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(a){e(function(e){return{type:"REMOVE_COFFEE_SUCCESS",coffeeId:e}}(t))}))})),O()}}),c.a.createElement(I,{isOpen:o,handleClose:h,coffeeTitle:e.title,coffeeImg:e.url,coffeePrice:e.price,editCard:function(e,t){var a,n;g((a=e,n=t,function(e){return e(function(e,t){return{type:"EDIT_COFFEE",coffee:e,coffeeId:t}}()),fetch("".concat(L,"/coffee/").concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:a.url,title:a.title,price:a.price})}).then((function(e){return e.json()})).then((function(t){e(N(n,w))}))})),h()},coffeeId:e.id}),c.a.createElement(d.a,{className:"title",color:"textSecondary"},e.title),c.a.createElement(d.a,{className:"price",variant:"body2",component:"p"},(t=e.price,"".concat(t.toFixed(2),"\u20ac")))))},x=a(62),A=a.n(x),R=a(141),W=function(e){var t=c.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],r=c.a.useState(""),i=Object(l.a)(r,2),f=i[0],u=i[1],s=c.a.useState(0),d=Object(l.a)(s,2),E=d[0],m=d[1],v=c.a.useState(!1),S=Object(l.a)(v,2),y=S[0],I=S[1],T={url:n,title:f,price:E};return c.a.useEffect((function(){j([n,f,E])?I(!0):I(!1)}),[n,f,E]),c.a.createElement(C.a,{open:e.isOpen,onClose:e.handleClose,"aria-labelledby":"form-dialog-title"},c.a.createElement(O.a,{id:"form-dialog-title"},"Add new coffee"),c.a.createElement(g.a,null,c.a.createElement(h.a,null,"Please fill all the fields to add new coffee"),c.a.createElement(F.a,{autoFocus:!0,margin:"dense",label:"Image Url",type:"text",name:"url",fullWidth:!0,onChange:function(e){return t=e.target.value,void o(t);var t},required:!0}),c.a.createElement(F.a,{margin:"dense",label:"Title",type:"text",name:"title",fullWidth:!0,onChange:function(e){return t=e.target.value,void u(t);var t},required:!0}),c.a.createElement(F.a,{margin:"dense",label:"Price",type:"number",name:"price",InputProps:{endAdornment:c.a.createElement(_.a,{position:"end"},"\u20ac")},inputProps:{min:.1,step:.1},fullWidth:!0,onChange:function(e){return t=Number(e.target.value),void m(t);var t},required:!0})),c.a.createElement(b.a,null,c.a.createElement(p.a,{onClick:e.handleClose,variant:"contained",color:"primary"},"Cancel"),c.a.createElement(p.a,{onClick:function(t){return e.addNewCoffee(T)},variant:"contained",color:"primary",disabled:!y},"Add")))},V=a(140),B=(a(91),function(){return c.a.createElement("div",{className:"app-loading"},c.a.createElement("svg",{className:"spinner",viewBox:"25 25 50 50"},c.a.createElement("circle",{className:"path",cx:"50",cy:"50",r:"15",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"})))}),M=Object(T.b)((function(e){return{coffee:e.coffee}}),{postCoffee:k})((function(e){var t=c.a.useState(!1),a=Object(l.a)(t,2),n=a[0],o=a[1],r=Object(T.c)(),i=function(){o(!1)};return c.a.createElement("div",{className:"billboard"},e.coffee.isLoading?c.a.createElement(B,null):c.a.createElement("div",null,c.a.createElement(V.a,{container:!0},e.coffee.coffeeList.map((function(e,t){return c.a.createElement(V.a,{item:!0,md:3,sm:4,xs:6,key:t},c.a.createElement(P,{url:e.url,title:e.title,price:e.price,id:e.id,deleteCard:function(e){console.log("deleted")}}))}))),c.a.createElement(U.a,{title:"Add new coffee","aria-label":"add"},c.a.createElement(R.a,{color:"primary","aria-label":"add",className:"add",onClick:function(){o(!0)}},c.a.createElement(A.a,null))),c.a.createElement(W,{isOpen:n,handleClose:i,addNewCoffee:function(e){r(k(e)),i()}})))})),J=(a(92),Object(T.b)((function(e){return{coffee:e.coffee}}))((function(e){return c.a.createElement("div",{className:"header"},c.a.createElement("a",{href:"/coffee-billboard",className:"logo-container"},c.a.createElement("span",{className:"logo-text"},"Coffee House"),c.a.createElement("img",{src:"./coffee-beans.png",alt:"logo",className:"logo-img"})),c.a.createElement("p",{className:"coffee-count"},"Total amount of coffee: ",e.coffee.coffeeList.length))})));a(93);var q=function(){return Object(T.c)()((function(e){return e({type:"GET_COFFEE_LIST"}),fetch("".concat(L,"/coffee")).then((function(e){return e.json()})).then((function(t){e({type:"RECEIVE_COFFEE_LIST",coffeeList:t})}))})),c.a.createElement("div",null,c.a.createElement(J,null),c.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(24),Q=a(63),Y=a(28),X={isLoading:!1,coffeeList:[]};function z(e,t){var a=t.findIndex((function(t){return t.id===e.id}));return t[a]=e,t}var H=Object(G.c)({coffee:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_COFFEE_BY_ID":case"EDIT_COFFEE":case"REMOVE_COFFEE":case"ADD_COFFEE":case"GET_COFFEE_LIST":return Object(Y.a)({},e,{isLoading:!1});case"RECEIVE_COFFEE_LIST":return Object(Y.a)({},e,{coffeeList:t.coffeeList,isLoading:!1});case"REMOVE_COFFEE_SUCCESS":return Object(Y.a)({},e,{coffeeList:e.coffeeList.filter((function(e){return e.id!==t.coffeeId})),isLoading:!1});case"ADD_COFFEE_SUCCESS":return Object(Y.a)({},e,{coffeeList:e.coffeeList.concat(t.coffee),isLoading:!1});case"EDIT COFFEE SUCCESS":return Object(Y.a)({},e,{coffeeList:z(t.coffee,e.coffeeList),isLoading:!1});case"REQUEST_COFFEE_BY_ID_SUCCESS":return Object(Y.a)({},e,{coffeeList:e.coffeeList.concat(t.coffee),isLoading:!1});default:return e}}}),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,K=Object(G.e)(H,$(Object(G.a)(Q.a)));r.a.render(c.a.createElement(T.a,{store:K},c.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[77,1,2]]]);
//# sourceMappingURL=main.54777bd5.chunk.js.map